{{ attach_library('dds_premium/image') }}

{% macro image(image, caption, image_style, attributes) %}
  {% import _self as self_image %}
  <figure {{ attributes }}>
    <div{{ create_attribute().addClass('image') }}>
      {{ image|responsive_image(image_style, 'lazyload') }}
    </div>
    {% if caption %}
      <figcaption>{{ caption }}</figcaption>
    {% endif %}
  </figure>
{% endmacro %}

{% import _self as self_image %}
{% if link.url %}
  <a href="{{ link.url }}" {{ link.target_blank ? 'target="_blank"' }} class="image_link">
    {{ self_image.image(image, caption, image_style, attributes) }}
    {% if link.title %}
      <span class="image_link__btn_wrapper">
        <span class="image_link__btn">{{ link.title }}</span>
      </span>
    {% endif %}
  </a>
{% else %}
  {{ self_image.image(image, caption, image_style, attributes) }}
{% endif %}
